# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...

autoload -U up-line-or-beginning-search
autoload -U down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
bindkey "^P" up-line-or-beginning-search
bindkey "^N" down-line-or-beginning-search

# disable errors when globs don't match anything
# setopt +o nomatch
# ls ~/.profile_* 1> /dev/null 2>&1 && for f in ~/.profile_*; do source $f; done
# command -v brew 2>&1 >/dev/null && brew analytics off 2>&1 >/dev/null

eval "$(direnv hook zsh)"

show_virtual_env() {
  if [ -n "$VIRTUAL_ENV" ]; then
    echo "($(basename $VIRTUAL_ENV)) "
  fi
}

export EDITOR=nvim
export PS1=$PS1'$(show_virtual_env)'
export LC_CTYPE=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export PATH="$PATH:/usr/local/opt/gettext/bin:/Applications/Postgres.app/Contents/Versions/9.6/bin:/Users/nikolay/projects/apache-cassandra-3.0.11/bin:${HOME}/.cargo/bin"
export GOPATH=${HOME}/gocode

# --files: List files that would be searched but do not search
# --no-ignore: Do not respect .gitignore, etc...
# --hidden: Search hidden files and folders
# --follow: Follow symlinks
# --glob: Additional conditions for search (in this case ignore everything in the .git/ folder)
export FZF_DEFAULT_COMMAND='rg --files --no-ignore --hidden --follow --glob "!.git/*"'

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

alias fix-cerb='ps aux | rg ssh | rg adhoc | tr -s " " | cut -d " " -f 2 | xargs echo | xargs kill'
alias tag-gc='for i in $( git tag | grep phabricator ); do git tag -d $i; done'

ulimit -n 8192
